---
title: tpmdiagnostics
description: Reference article for the tpmdiagnostics feature-on-demand command, which gets information about the Trusted Platform Module.
ms.topic: reference
author: ronaldai
ms.author: raigner
manager: kedard
ms.date: 08/05/2021
---

# tpmdiagnostics

This utility can be used to get information about the [Trusted Platform Module (TPM)](/windows/security/information-protection/tpm/trusted-platform-module-overview).

This utility is installed as feature-on-demand. It can be installed by [tpmtool](/windows-server/administration/windows-commands/tpmtool) or through optional features in the Settings app.

>[!IMPORTANT]
>Some information may relate to the pre-released product, which may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.

## Syntax

```
tpmdiagnostics parameter [<arguments>]
```

### Parameters

| Group | Parameter | Description |
|TpmInfo|GetLockoutInfo||
||IsOwned||
||PlatformType||
||CheckFIPS||
||ReadClock||
||GetDeviceInformation||
||IfxRsaKeygenVulnerability||
||GatherLogs [output directory path]||
||PssPadding||
||IsReadyInformation||
|--|--|--|
|TpmTask|MaintenanceTaskStatus||
||ShowTaskStatus||
||IsEULAAccepted||
||ProvisionTpm [force clear] [allow PPI prompt]||
|--|--|--|
|TpmProvisioning|PrepareTPM||
||CanUseLockoutPolicyClear||
||CanClearByPolicy||
|--|--|--|
|AutoProvisioning|IsAutoProvisioningEnabled||
||EnableAutoProvisioning||
||DisableAutoProvisioning [-o]||
|--|--|--|
|EK|EkInfo||
||ekchain||
||EkCertStoreRegistry||
||GetEkCertFromWeb [-ecc] [certificate file]||
||GetEkCertFromNVR [-ecc] [certificate file]||
||GetEkCertFromReg [-ecc] [certificate file]||
||GetEk [-ecc] [key file]||
||CheckEkCertState||
||InstallEkCertFromWeb||
||InstallEkCertFromNVR||
||InstallEkCertThroughCoreProv||
||EKCertificateURL||
|--|--|--|
|WindowsAIK|InstallWindowsAIK [-skipCert]||
||WinAikPersistedInTpm||
||UninstallWindowsAIKCert||
||GetWindowsAIKCert [cert file]||
||IsWindowsAIKInstalledInNCrypt||
||EnrollWindowsAIKCert||
||GetWindowsAIKPlatformClaim ["fresh"] [output file]||
|--|--|--|
|OtherKeys|PrintPublicInfo `[srk | aik | ek | handle] [-asBcryptBlob | -RsaKeyBitsOnly | -RsaSymKeyBitsOnly] [-ecc]`||
||TestParms `[SYMCIPHER | RSA ] [algorithm specific arguments]`||
||EnumerateKeys||
|--|--|--|
|NVStorage|DefineIndex `[index] [size] [attribute flags]`||
||UndefineIndex `[index]`||
||ReadNVIndexPublic `[index]`||
||WriteNVIndex `[index] [data in hex format | -file filename]`||
||ReadNVIndex `[index]`||
||NVSummary||
|--|--|--|
|NVBootCounter|CheckBootCounter||
||ReadBootCounter `[/f]`||
|--|--|--|
|PCRs|PrintPcrs||
|--|--|--|
|PhysicalPresence|GetPPTransition||
||GetPPVersionInfo||
||GetPPResponse||
||GetPPRequest||
|--|--|--|
|TPMCommandsAndResponses|CommandCode `[hex command code]`||
||ResponseCode `[hex response code]`||
|--|--|--|
|Tracing|EnableDriverTracing||
||DisableDriverTracing||
||FormatTrace `[etl file] [output json file]`||
|--|--|--|
|DRTM|DescribeMle `[MLE Binary File]`||
|--|--|--|
|Misc|Help `[command name]`||
||DecodeBase64File `<file to decode from base 64>`||
||EncodeToBase64File `<file to encode>`||
||ReadFileAsHex `<file to read>`||
||ConvertBinToHex `<file to read>` `<file to write to>`||
||ConvertHexToBin `<file to read>` `<file to write to>`||
||Hash `<hex bytes | raw value to hash>`||
||GetCapabilities||

## Examples

To display the basic information of the TPM, type:

```
tpmtool getdeviceinformation
```

To collect TPM logs and place them in the current directory, type:

```
tpmtool gatherlogs
```

To collect TPM logs and place them in `C:\Users\Public`, type:

```
tpmtool gatherlogs C:\Users\Public
```

To collect TPM driver traces, type:

```
tpmtool drivertracing start
# Run scenario
tpmtool drivertracing stop
```

## Additional References

- [Command-Line Syntax Key](command-line-syntax-key.md)

- [COM Error Codes (TPM, PLA, FVE)](/windows/win32/com/com-error-codes-6)
